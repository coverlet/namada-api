import { db } from "./db.js";

const stake = {
  "0": "38191970326720",
  "1": "38191970326720",
  "2": "66432754855760",
  "3": "71812667703086",
  "4": "77533426248320",
  "5": "84252647919890",
  "6": "90981836864650",
  "7": "91696990012726",
  "8": "93399689221758",
  "9": "118068933602325",
  "10": "135137422256185",
  "11": "136845647111793",
  "12": "137452403695482",
  "13": "139844223116420",
  "14": "141829765163653",
  "15": "142709683546232",
  "16": "143031764468354",
  "17": "146625008128242",
  "18": "148555342297723",
  "19": "150215807315474",
  "20": "150328594903836",
  "21": "153252095003836",
  "22": "153308464153674",
  "23": "153422690033674",
  "24": "156422204033674",
  "25": "156851650673674",
  "26": "161431829153750",
  "27": "162244112918750",
  "28": "164129026558750",
  "29": "164154349743152",
  "30": "165992901443228",
  "31": "166136503943228",
  "32": "166238850743228",
  "33": "167122293223528",
  "34": "166390324543528",
  "35": "166531715227650",
  "36": "165905897151842",
  "37": "166160067193646",
  "38": "167827211770513",
  "39": "195620482908152",
  "40": "195956090540731",
  "41": "196325018140731",
  "42": "198702298007964",
  "43": "198777240657964",
  "44": "198843943357964",
  "45": "204881964184964",
  "46": "204928954584964",
  "47": "204965213510122",
  "48": "205014662480122",
  "49": "205057778394824",
  "50": "205168172594824",
  "51": "205377056244824",
  "52": "206169211274824",
  "53": "211666859129182",
  "54": "212894984185825",
  "55": "220720303574889",
  "56": "220920703601719",
  "57": "226527867891388",
  "58": "242644321377901",
  "59": "242779650154854",
  "60": "242818171898419",
  "61": "243151571395603",
  "62": "250874772640995",
  "63": "251388680846514",
  "64": "251413434652182",
  "65": "257561148770626",
  "66": "262611092706870",
  "67": "262738798171316",
  "68": "262916531176375",
  "69": "274165745705460",
  "70": "294183259191291",
  "71": "296723010567414",
  "72": "296755283497498",
  "73": "312825067557747",
  "74": "312929958584050",
  "75": "334590309222042",
  "76": "346611343935512",
  "77": "346627977855170",
  "78": "346648719093770",
  "79": "346650045443650",
  "80": "346576500982820",
  "81": "348645787233153",
  "82": "348655697920064",
  "83": "348680563563673",
  "84": "348690998651230",
  "85": "348695050916126",
  "86": "348664547532008",
  "87": "353061972374450",
  "88": "353064054718359",
  "89": "353068174271792",
  "90": "353136435224034",
  "91": "353140821179645",
  "92": "353164699947296",
  "93": "363203473257602",
  "94": "363874446148411",
  "95": "363870695421321",
  "96": "363893865838833",
  "97": "363925361569577",
  "98": "363931161839506",
  "99": "363950015966014",
  "100": "363963751916193",
  "101": "363976951237535",
  "102": "363933674056808",
  "103": "363939162535586",
  "104": "363943056310822",
  "105": "363850474024385",
  "106": "363876113265400",
  "107": "363861129123627",
  "108": "363871211731704",
  "109": "364142607894313",
  "110": "364218288188075",
  "111": "364222695598453",
  "112": "364210818453791",
  "113": "364223848105164",
  "114": "364287366504245",
  "115": "364295315450621",
  "116": "364295870546138",
  "117": "364241656730105",
  "118": "364393814405772",
  "119": "364403002169219",
  "120": "364842673028499",
  "121": "364845646915073",
  "122": "364852661630142",
  "123": "386097497581069",
  "124": "386192608573384",
  "125": "386457030021724",
  "126": "386463847777503",
  "127": "386700281888057",
  "128": "386711846694683",
  "129": "386716708820119",
  "130": "386730508525680",
  "131": "386738632508804",
  "132": "386390208764590",
  "133": "386593362426494",
  "134": "386601212620021",
  "135": "386599875472490",
  "136": "386611206147701",
  "137": "386771070491640",
  "138": "391811434524179",
  "139": "391823093797708",
  "140": "393325820377420",
  "141": "403074525297978",
  "142": "403278842446189",
  "143": "403337629896946",
  "144": "403290407974701",
  "145": "403293337422360",
  "146": "403227846747435",
  "147": "403233274666526",
  "148": "403227173394244",
  "149": "403253582359325",
  "150": "403332372474264",
  "151": "403412666896368",
  "152": "403416914633237",
  "153": "403497174114632",
  "154": "403597580764160",
  "155": "403603029426712",
  "156": "403603766251380",
  "157": "403587600408176",
  "158": "403604371059762",
  "159": "403605920311194",
  "160": "403628462884308",
  "161": "403628977171230",
  "162": "403623062033942",
  "163": "403631443337667",
  "164": "403631972517427",
  "165": "404831974547831",
  "166": "404851961658787",
  "167": "404814425314598",
  "168": "404815909869255",
  "169": "404849392177342",
  "170": "404767905061960",
  "171": "404773392412277",
  "172": "404775222663975",
  "173": "405004482283181",
  "174": "405021310346088",
  "175": "405023112665246",
  "176": "405012750021931",
  "177": "404988280231432",
  "178": "404985498231122",
  "179": "404996183817464",
  "180": "405006860385948",
  "181": "405008408204485",
  "182": "405010639527848",
  "183": "405002967567550",
  "184": "405001824758350",
  "185": "405764655562462",
  "186": "405760674499602",
  "187": "405737076549598",
  "188": "405735988303257",
  "189": "405688060076634",
  "190": "406143044588488",
  "191": "406125075883640",
  "192": "406128953457190",
  "193": "406088381554191",
  "194": "406165505935117",
  "195": "406166513212263",
  "196": "406173615161358",
  "197": "406183243807678",
  "198": "406190320119149",
  "199": "406189443171997",
  "200": "406189931045758",
  "201": "406195119951673",
  "202": "406197855129796",
  "203": "406199338893893",
  "204": "406191193309042",
  "205": "406233122265263",
  "206": "406236451161532",
  "207": "406242361039383",
  "208": "406246047446499",
  "209": "407811523829733",
  "210": "407775124905137",
  "211": "407778167556567",
  "212": "417572336915281",
  "213": "427049046896930",
  "214": "427056660315748",
  "215": "427079588621842",
  "216": "427081396342508",
  "217": "427089654596999",
  "218": "427099279946801",
  "219": "427100137575673",
  "220": "426157770218593",
  "221": "426136123108459",
  "222": "426141956578687",
  "223": "426144534245128",
  "224": "426161258821670",
  "225": "426168433491319",
  "226": "426180358908817",
  "227": "426180243623494",
  "228": "426180152143013",
  "229": "424777379980951",
  "230": "424764024517327",
  "231": "424764478183017",
  "232": "424765755114328",
  "233": "424530497350741",
  "234": "424555039200687",
  "235": "424554826793521",
  "236": "424553347728809",
  "237": "424564029429576",
  "238": "424566576415141",
  "239": "424557048888136",
  "240": "424557152299215",
  "241": "424559839337779",
  "242": "424567119628631",
  "243": "424567229224124",
  "244": "424568349440769",
  "245": "424569648919582",
  "246": "424584424304210",
  "247": "424584628104598",
  "248": "424584541599324",
  "249": "424586123320163",
  "250": "424597955568435",
  "251": "424602272305059",
  "252": "425131476373718",
  "253": "425159182571440",
  "254": "425163590113350",
  "255": "425153451710216",
  "256": "425146309853644",
  "257": "425235149926424",
  "258": "425292862266151",
  "259": "425293506812382",
  "260": "425301931288417",
  "261": "425505806837622",
  "262": "425447111518537",
  "263": "425449921969741",
  "264": "425660295005671",
  "265": "426115303620111",
  "266": "426133718124898",
  "267": "426135932985024",
  "268": "426111540646783",
  "269": "425604853889125",
  "270": "425608212874088",
  "271": "425612969540896",
  "272": "425613537499530",
  "273": "425603197613405",
  "274": "425608788858150",
  "275": "425608935645281",
  "276": "425602892077977",
  "277": "425116301514629",
  "278": "425080942078204",
  "279": "425090161219811",
  "280": "425097863434626",
  "281": "425126565618760",
  "282": "425127929311275",
  "283": "425125715272352",
  "284": "425103014032010",
  "285": "425101400865190",
  "286": "425104826844943",
  "287": "425104255830625",
  "288": "425055712702294",
  "289": "425042235494447",
  "290": "425042083199234",
  "291": "425044356032180",
  "292": "425057355415437",
  "293": "425081952702537",
  "294": "425082968365913",
  "295": "425088771771901",
  "296": "425089276804823",
  "297": "425095461855773",
  "298": "425102987974377",
  "299": "425104944317023",
  "300": "425107210050766",
  "301": "425270718357406",
  "302": "425272539386464",
  "303": "424785357020311",
  "304": "424787480962334",
  "305": "424797297977613",
  "306": "424823081611196",
  "307": "424860543592141",
  "308": "424900137871002",
  "309": "424935493071495",
  "310": "425933885362892",
  "311": "425937784139817",
  "312": "425939020918154",
  "313": "425939943947521",
  "314": "426008936976310",
  "315": "426000647464030",
  "316": "425885440168049",
  "317": "425420848331088",
  "318": "425392476430687",
  "319": "425396457553362",
  "320": "425226710906494",
  "321": "425142626745586",
  "322": "425546559204146",
  "323": "425548650489677",
  "324": "425544614643621",
  "325": "425535452910953",
  "326": "425528320983864",
  "327": "425523075533297",
  "328": "425511665272839",
  "329": "425508468351101",
  "330": "424183101302154",
  "331": "424185929897926",
  "332": "424188910470961",
  "333": "423907811180300",
  "334": "423993380064413",
  "335": "423989679423313",
  "336": "423971361349497",
  "337": "423965950512871",
  "338": "423930792558403",
  "339": "423948861524529",
  "340": "423947738048498",
  "341": "423973224521165",
  "342": "424080438395003",
  "343": "424082530436927",
  "344": "424080845637228",
  "345": "423882762965329",
  "346": "423884866976077",
  "347": "423880355784544",
  "348": "423888074175260",
  "349": "423895542786733",
  "350": "423906275350590",
  "351": "423904868106506",
  "352": "423905839946665",
  "353": "423913625726141",
  "354": "423911845548639",
  "355": "423916993903004",
  "356": "423917321798336",
  "357": "423926207690584",
  "358": "423927245862094",
  "359": "423970576685534",
  "360": "423966285476202",
  "361": "423336258999291",
  "362": "423340598106497",
  "363": "423379473274942",
  "364": "423382398854974",
  "365": "423283649710723",
  "366": "423292396054927",
  "367": "423292367089704",
  "368": "423291787926205",
  "369": "423316751080572",
  "370": "423321560657870",
  "371": "423322925156158",
  "372": "423330068344923",
  "373": "423340843804209",
  "374": "423329078854087",
  "375": "423230057704346",
  "376": "423196413979163",
  "377": "423196869144003",
  "378": "423198498581545",
  "379": "423198754240655",
  "380": "423163979241844",
  "381": "423191286485260",
  "382": "423207132620774",
  "383": "423208331040960",
  "384": "423211827658119",
  "385": "423212240952851",
  "386": "423222632939332",
  "387": "423200309963724",
  "388": "423223234640332",
  "389": "423343219524601",
  "390": "423346928161558",
  "391": "423360647062017",
  "392": "423365363341009",
  "393": "423366405668783",
  "394": "423382548145291",
  "395": "423373279479117",
  "396": "424021195045689",
  "397": "424024704928162",
  "398": "424025100893158",
  "399": "424025608974860",
  "400": "424040186840376",
  "401": "425894524844854",
  "402": "425884161489916",
  "403": "425884438147375",
  "404": "425910220786920",
  "405": "425910526542447",
  "406": "425917491736928",
  "407": "425934261543268",
  "408": "425932429251834",
  "409": "425945468379620",
  "410": "425949970431657",
  "411": "425949485070237",
  "412": "425951512847335",
  "413": "425952555295795",
  "414": "425954392464776",
  "415": "425954524092229",
  "416": "425925908278349",
  "417": "425934383195943",
  "418": "425937702811667",
  "419": "425938444610829",
  "420": "425969485939483",
  "421": "425972028159642",
  "422": "425966202716885",
  "423": "425966578528947",
  "424": "425972740667237",
  "425": "425984819170573",
  "426": "425974733758767",
  "427": "425975961909354",
  "428": "425474059589755",
  "429": "425473651827066",
  "430": "425473146349428",
  "431": "425474390507240",
  "432": "425467384167911",
  "433": "425470671586413",
  "434": "425452851357866",
  "435": "425460292591590",
  "436": "425461022864384",
  "437": "425466970711627",
  "438": "425474337711437",
  "439": "425476037882588",
  "440": "425499716628989",
  "441": "425508623076588",
  "442": "425512213454537",
  "443": "425518003085460",
  "444": "425526302350212",
  "445": "425562093448368",
  "446": "425590310422583",
  "447": "425591771901161",
  "448": "425621257302501",
  "449": "425729781525167",
  "450": "425735828015221",
  "451": "425736635963332",
  "452": "425746554427912",
  "453": "425756578252144",
  "454": "425756882126703",
  "455": "425757219631307",
  "456": "425750965542828",
  "457": "425750312574574",
  "458": "425750563153928",
  "459": "425753708761029",
  "460": "425819873408571",
  "461": "425820363927841",
  "462": "425845045650930",
  "463": "425846072163591",
  "464": "425849671925439",
  "465": "425896289273759",
  "466": "425901215705595",
  "467": "425891868806967",
  "468": "425893016067085",
  "469": "425891833736142",
  "470": "425892355994822",
  "471": "425892555794231",
  "472": "425907313101711",
  "473": "425918329328371",
  "474": "425956072637987",
  "475": "425957072072644",
  "476": "425960781657149",
  "477": "425965442056633",
  "478": "425966041247509",
  "479": "426072984248166",
  "480": "426073798749889",
  "481": "426078088960815",
  "482": "426079128844104",
  "483": "426079283288514",
  "484": "426155354523214",
  "485": "426181202159948",
  "486": "426184419691125",
  "487": "426207117076655",
  "488": "426343852123662",
  "489": "426348378206947",
  "490": "426348030044376",
  "491": "426346776112476",
  "492": "426347142214557",
  "493": "426354800054017",
  "494": "426356955533217",
  "495": "426356851147218",
  "496": "426357555478466",
  "497": "426421855122094",
  "498": "426422993172352",
  "499": "426452997315133",
  "500": "426454900848866",
  "501": "426554053554548",
  "502": "426567843908531",
  "503": "426577045340451",
  "504": "426578209431192",
  "505": "426580526627498",
  "506": "426588762877352",
  "507": "426588839443468",
  "508": "426976421055261",
  "509": "427016083965594",
  "510": "427019301694505",
  "511": "427019615354250",
  "512": "427021974798401",
  "513": "427027845474179",
  "514": "427024342507750",
  "515": "427024915224287",
  "516": "427027883669774",
  "517": "427076800715057",
  "518": "427076613026384",
  "519": "427077637234921",
  "520": "427079031636103",
  "521": "427079766757876",
  "522": "427083936456483",
  "523": "427100984317613",
  "524": "427101539772411",
  "525": "427108180911242",
  "526": "427108527681970",
  "527": "427757643324992",
  "528": "428080229909812",
  "529": "428080800415529",
  "530": "428091303197293",
  "531": "428091452277729",
  "532": "428074988201022",
  "533": "428075613720615",
  "534": "428075954352514",
  "535": "428076501099878",
  "536": "428076581741512",
  "537": "428079437353008",
  "538": "428080249239094",
  "539": "428080539411110",
  "540": "428114102494322",
  "541": "428119534079205",
  "542": "428128251088750",
  "543": "428085903849186",
  "544": "428083420309951",
  "545": "428090704049330",
  "546": "428093970378185",
  "547": "428094294724594",
  "548": "428094422861946",
  "549": "428094693044521",
  "550": "428095126036311",
  "551": "428098910242791",
  "552": "428099807237933",
  "553": "428100329201234",
  "554": "428100541280130",
  "555": "428102401775937",
  "556": "428106119022458",
  "557": "428107515809472",
  "558": "428107734149445",
  "559": "428104845131836",
  "560": "428113169021577",
  "561": "428115533397544",
  "562": "428115469630516",
  "563": "428115630372360",
  "564": "428061873612051",
  "565": "428063146641594",
  "566": "428004503372054",
  "567": "428011916059853",
  "568": "428025041312488",
  "569": "428027068260223",
  "570": "428017685849453",
  "571": "428018111782256",
  "572": "428055174610156",
  "573": "428055100738882",
  "574": "428055864104631",
  "575": "428056133917510",
  "576": "428052513272080",
  "577": "428053444645297",
  "578": "428056193828769",
  "579": "428056566370797",
  "580": "428056811877425",
  "581": "428062484852212",
  "582": "429064401400914",
  "583": "429064454128047",
  "584": "429026433117401",
  "585": "429028648708813",
  "586": "429038342776307",
  "587": "429037134866147",
  "588": "429037805880629",
  "589": "429037863553156",
  "590": "429037939646005",
  "591": "429011218264614",
  "592": "429012934793897",
  "593": "429026761389700",
  "594": "429027508363827",
  "595": "429128868989290",
  "596": "429130377646941",
  "597": "429308304241954",
  "598": "429410263635039",
  "599": "429409974321891",
  "600": "429415575669378",
  "601": "429418980506480",
  "602": "429418999601147",
  "603": "429419084052668",
  "604": "429523570700319",
  "605": "429522204281054",
  "606": "429523093611691",
  "607": "429523102079677",
  "608": "429519177589644",
  "609": "429492544378491",
  "610": "429491362413037",
  "611": "429446870313037",
  "612": "429446398662508",
  "613": "429449327841143",
  "614": "429451898543316",
  "615": "429455660568892",
  "616": "429456590061442",
  "617": "429622512298194",
  "618": "429629638240349",
  "619": "429880207880784",
  "620": "429885271014408",
  "621": "429874068899275",
  "622": "429874178394319",
  "623": "429875205455041",
  "624": "429875629804319",
  "625": "429866224467337",
  "626": "429867080173735",
  "627": "429869061997259",
  "628": "429871134264373",
  "629": "429869940631243",
  "630": "429870100705557",
  "631": "429870093615557",
  "632": "429881752047700",
  "633": "429903346287898",
  "634": "429896907487898",
  "635": "429918141162907",
  "636": "429918222662907",
  "637": "429921089217074",
  "638": "429914291287381",
  "639": "429887162381600",
  "640": "429882131881600",
  "641": "429855952388747",
  "642": "429853319646023",
  "643": "429852328946609",
  "644": "429824524209375",
  "645": "429824713910466",
  "646": "429837614082711",
  "647": "429837780754297",
  "648": "429839234892811",
  "649": "429794537746895",
  "650": "429798524187286",
  "651": "429798706187286",
  "652": "429807272917535",
  "653": "429642385145606",
  "654": "429638956866719",
  "655": "429893445036262",
  "656": "429894561109514",
  "657": "429889893179637",
  "658": "429891069991480",
  "659": "429889846891480",
  "660": "429889467261480",
  "661": "429886942447332",
  "662": "429887142523040",
  "663": "429887847709121",
  "664": "429890156009121",
  "665": "429934026928339",
  "666": "429935289665785",
  "667": "429935289665785",
  "668": "429925362156027",
  "669": "429871445438147",
  "670": "429854472901983",
  "671": "429854032901983",
  "672": "429853028496517",
  "673": "429827124653572",
  "674": "429836198754020",
  "675": "429826561566511",
  "676": "429812075660638",
  "677": "429790334254763",
  "678": "429791880565333",
  "679": "429791465715535",
  "680": "429769356208400",
  "681": "429752937663762",
  "682": "429731813751602",
  "683": "429731947112769",
  "684": "429716320324746",
  "685": "429726417803770",
  "686": "429726836320467",
  "687": "429726254226828",
  "688": "429725679746199",
  "689": "429649082122665",
  "690": "429651541760470",
  "691": "429651690024081",
  "692": "429508467835059",
  "693": "429506401484871",
  "694": "429508513878131",
  "695": "429508857450313",
  "696": "429516544903567",
  "697": "429471962300857",
  "698": "429477551901278",
  "699": "429441850822047",
  "700": "429344399958738",
  "701": "429369851994653",
  "702": "429283559599472",
  "703": "429282931582432",
  "704": "429287802431702",
  "705": "429262474198110",
  "706": "428192475602376",
  "707": "429236940913719",
  "708": "427855234957425",
  "709": "427693322104241",
  "710": "427274123770971",
  "711": "427253710681521",
  "712": "427174902944780",
  "713": "426035116990467",
  "714": "425977794787482",
  "715": "425977902880498",
  "716": "425973528219500",
  "717": "425974948210147",
  "718": "425974428665395",
  "719": "425975834268483",
  "720": "425879816695787",
  "721": "425837389640161",
  "722": "425808640685575",
  "723": "425808689475933",
  "724": "425329532211709",
  "725": "425294580602451",
  "726": "425233405031855",
  "727": "425235674207573",
  "728": "425246479505381",
  "729": "425231317387560",
  "730": "424839914448266",
  "731": "424866694879095",
  "732": "424907778971157",
  "733": "424878754611411",
  "734": "424787637744886",
  "735": "424786383994062",
  "736": "424532108430137",
  "737": "424411646668186",
  "738": "424452641507113",
  "739": "424447291495790",
  "740": "424170617838481",
  "741": "424174380498466",
  "742": "424075245689024"
}


async function insertData() {
  try {
    // Convert to array of objects
    const stakeArray = Object.entries(stake).map(([epoch, stake]) => ({
      epoch: parseInt(epoch),
      stake: BigInt(stake),
    }));

    // Insert in batch using ON CONFLICT to handle existing rows
    const values = stakeArray.map((_, i) => `($${i * 2 + 1}, $${i * 2 + 2})`).join(',');
    const flatValues = stakeArray.flatMap(({ epoch, stake }) => [epoch, stake.toString()]);

    const query = `
      INSERT INTO public.total_stake (epoch, stake)
      VALUES ${values}
      ON CONFLICT (epoch) DO UPDATE SET stake = EXCLUDED.stake;
    `;

    await db.query(query, flatValues);
    console.log(`✅ Inserted/updated ${stakeArray.length} rows`);
  } catch (err) {
    console.error('❌ Error inserting data:', err);
  } 
}

await insertData();